class vllg5_puzzle {
    property parent;
    property discpickup;
    property cinema;
    property cinema_shown;
    property deadhives;
    property coindoor;
    property coindoortext;
    property coindoortexttimer;
    property showcoindoor;
    property upgradefruit;
    property upgradefruit2;
    property upgradefruit3;
    property upgradefruit_shown;
    property upgradefruit2_shown;
    property upgradefruit3_shown;
    property wirlpool;
    property orientation;
    
    method vllg5_puzzle(param1) {
        this.parent = param1;
        this.showcoindoor = 1;
        return null;
    }
    
    method initfull() {
        var var1;
        var var2;
        var var3;
        var var4;
        var4 = gcsaver::findcinema(scslosifoundation::stringtoidentifier("cin4"));
        if (var4) {
            this.cinema_shown = 1;
        }
        else {
            this.cinema_shown = 0;
        }
        if (this.cinema_shown == 0) {
            this.cinema = gccinemaengine::create();
            gccinemaengine::load(this.cinema, "cin4");
            gccinemaengine::setnextarea(this.cinema, scslosifoundation::stringtoidentifier("tura"));
        }
        var1 = gcsaver::finditem(scslosifoundation::stringtoidentifier("dsc5"));
        if (var1 == 0) {
            this.discpickup = new lego_pickup("dsc5", 0, 5, "item", 7, 1);
            this.discpickup.initfull();
            this.discpickup.show();
            this.discpickup.setcondition(32768);
            this.discpickup.setquest(1);
        }
        this.deadhives = 0;
        if (gcsaver::isconditionset(4194304) == 1) {
            var3 = gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vlgr"), 0);
            gccharacter::settohunga(var3, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0), scslosifoundation::stringtoidentifier("mkba"));
            gccharacter::setorientation(var3, 169);
            gccharacter::setinputstate(var3, scslosifoundation::stringtoidentifier("none"));
            gccharacter::switchanimation(var3, scslosifoundation::stringtoidentifier("d000"), -1);
            gccharacter::setcolors(gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vlgr"), 0), rgba(2, 127, 30, 255), rgba(2, 127, 30, 255), rgba(2, 127, 30, 255));
            var3 = gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl01"), 0);
            gccharacter::settohunga(var3, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0), scslosifoundation::stringtoidentifier("mk8a"));
            gccharacter::setinputstate(var3, scslosifoundation::stringtoidentifier("none"));
            gccharacter::switchanimation(var3, scslosifoundation::stringtoidentifier("d003"), -1);
            gccharacter::setcolors(gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl01"), 0), rgba(2, 127, 30, 255), rgba(2, 127, 30, 255), rgba(0, 150, 121, 255));
            var3 = gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl02"), 0);
            gccharacter::settohunga(var3, rgba(0, 150, 121, 255), rgba(0, 150, 121, 255), scslosifoundation::stringtoidentifier("mk4a"));
            gccharacter::setorientation(var3, -65);
            gccharacter::setinputstate(var3, scslosifoundation::stringtoidentifier("none"));
            gccharacter::switchanimation(var3, scslosifoundation::stringtoidentifier("d000"), -1);
            var3 = gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl03"), 0);
            gccharacter::settohunga(var3, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0), scslosifoundation::stringtoidentifier("mk0a"));
            gccharacter::setorientation(var3, -151);
            gccharacter::setinputstate(var3, scslosifoundation::stringtoidentifier("none"));
            gccharacter::switchanimation(var3, scslosifoundation::stringtoidentifier("d003"), -1);
            gccharacter::setcolors(gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl03"), 0), rgba(187, 231, 133, 255), rgba(187, 231, 133, 255), rgba(2, 127, 30, 255));
            var3 = gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl04"), 0);
            gccharacter::settohunga(var3, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0), scslosifoundation::stringtoidentifier("mkca"));
            gccharacter::setcolors(gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl04"), 0), rgba(2, 127, 30, 255), rgba(2, 127, 30, 255), rgba(115, 117, 115, 255));
            var3 = gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl05"), 0);
            gccharacter::settohunga(var3, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0), scslosifoundation::stringtoidentifier("mk0a"));
            gccharacter::setorientation(var3, -165);
            gccharacter::setinputstate(var3, scslosifoundation::stringtoidentifier("none"));
            gccharacter::switchanimation(var3, scslosifoundation::stringtoidentifier("hak5"), -1);
            gccharacter::setcolors(gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl05"), 0), rgba(0, 150, 121, 255), rgba(0, 150, 121, 255), rgba(2, 127, 30, 255));
            var3 = gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl06"), 0);
            gccharacter::settohunga(var3, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0), scslosifoundation::stringtoidentifier("mkca"));
            gccharacter::setcolors(gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl06"), 0), rgba(187, 231, 133, 255), rgba(2, 127, 30, 255), rgba(0, 150, 121, 255));
            var3 = gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl07"), 0);
            gccharacter::settohunga(var3, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0), scslosifoundation::stringtoidentifier("mk9a"));
            gccharacter::setorientation(var3, 105);
            gccharacter::setinputstate(var3, scslosifoundation::stringtoidentifier("none"));
            gccharacter::switchanimation(var3, scslosifoundation::stringtoidentifier("hak5"), -1);
            gccharacter::setcolors(gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl07"), 0), rgba(187, 231, 133, 255), rgba(187, 231, 133, 255), rgba(0, 150, 121, 255));
            var3 = gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl08"), 0);
            gccharacter::settohunga(var3, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0), scslosifoundation::stringtoidentifier("mk6a"));
            gccharacter::setorientation(var3, -132);
            gccharacter::setinputstate(var3, scslosifoundation::stringtoidentifier("none"));
            gccharacter::switchanimation(var3, scslosifoundation::stringtoidentifier("d003"), -1);
            gccharacter::setcolors(gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl08"), 0), rgba(2, 127, 30, 255), rgba(2, 127, 30, 255), rgba(2, 127, 30, 255));
            var3 = gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl09"), 0);
            gccharacter::settohunga(var3, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0), scslosifoundation::stringtoidentifier("mk2a"));
            gccharacter::setcolors(gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl09"), 0), rgba(0, 150, 121, 255), rgba(0, 150, 121, 255), rgba(2, 127, 30, 255));
            var3 = gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl10"), 0);
            gccharacter::settohunga(var3, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0), scslosifoundation::stringtoidentifier("mkba"));
            gccharacter::setorientation(var3, -91);
            gccharacter::setinputstate(var3, scslosifoundation::stringtoidentifier("none"));
            gccharacter::switchanimation(var3, scslosifoundation::stringtoidentifier("hak5"), -1);
            gccharacter::setcolors(gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl10"), 0), rgba(2, 127, 30, 255), rgba(2, 127, 30, 255), rgba(115, 117, 115, 255));
            var3 = gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl11"), 0);
            gccharacter::settohunga(var3, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0), scslosifoundation::stringtoidentifier("mk4a"));
            gccharacter::setorientation(var3, 45);
            gccharacter::setinputstate(var3, scslosifoundation::stringtoidentifier("none"));
            gccharacter::switchanimation(var3, scslosifoundation::stringtoidentifier("d000"), -1);
            gccharacter::setcolors(gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl11"), 0), rgba(0, 208, 33, 255), rgba(0, 208, 33, 255), rgba(102, 0, 102, 255));
            var3 = gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl12"), 0);
            gccharacter::settohunga(var3, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0), scslosifoundation::stringtoidentifier("mk7a"));
            gccharacter::setorientation(var3, -41);
            gccharacter::setinputstate(var3, scslosifoundation::stringtoidentifier("none"));
            gccharacter::switchanimation(var3, scslosifoundation::stringtoidentifier("d000"), -1);
            gccharacter::setcolors(gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl12"), 0), rgba(187, 231, 133, 255), rgba(187, 231, 133, 255), rgba(2, 127, 30, 255));
            var3 = gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl13"), 0);
            gccharacter::settohunga(var3, rgba(187, 231, 133, 255), rgba(0, 150, 121, 255), scslosifoundation::stringtoidentifier("mkaa"));
            gccharacter::setorientation(var3, 142);
            gccharacter::setinputstate(var3, scslosifoundation::stringtoidentifier("none"));
            gccharacter::switchanimation(var3, scslosifoundation::stringtoidentifier("d000"), -1);
            var3 = gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl14"), 0);
            gccharacter::settohunga(var3, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0), scslosifoundation::stringtoidentifier("mk1a"));
            gccharacter::setcolors(gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl14"), 0), rgba(187, 231, 133, 255), rgba(187, 231, 133, 255), rgba(2, 127, 30, 255));
            var3 = gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl15"), 0);
            gccharacter::settohunga(var3, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0), scslosifoundation::stringtoidentifier("mk3a"));
            gccharacter::setcolors(gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl15"), 0), rgba(0, 150, 121, 255), rgba(187, 231, 133, 255), rgba(187, 231, 133, 255));
            gcareadirector::hide(scslosifoundation::stringtoidentifier("fhv0"), scslosifoundation::stringtoidentifier("vllg"));
            globalclass.bgmusic.changefilename("Root/Data/sounds/MusicVillage");
            globalclass.bgmusic.play(1);
        }
        else {
            gcmodeldirector::hide(scslosifoundation::stringtoidentifier("vlgr"), 0);
            gcmodeldirector::hide(scslosifoundation::stringtoidentifier("vl01"), 0);
            gcmodeldirector::hide(scslosifoundation::stringtoidentifier("vl02"), 0);
            gcmodeldirector::hide(scslosifoundation::stringtoidentifier("vl03"), 0);
            gcmodeldirector::hide(scslosifoundation::stringtoidentifier("vl04"), 0);
            gcmodeldirector::hide(scslosifoundation::stringtoidentifier("vl05"), 0);
            gcmodeldirector::hide(scslosifoundation::stringtoidentifier("vl06"), 0);
            gcmodeldirector::hide(scslosifoundation::stringtoidentifier("vl07"), 0);
            gcmodeldirector::hide(scslosifoundation::stringtoidentifier("vl08"), 0);
            gcmodeldirector::hide(scslosifoundation::stringtoidentifier("vl09"), 0);
            gcmodeldirector::hide(scslosifoundation::stringtoidentifier("vl10"), 0);
            gcmodeldirector::hide(scslosifoundation::stringtoidentifier("vl11"), 0);
            gcmodeldirector::hide(scslosifoundation::stringtoidentifier("vl12"), 0);
            gcmodeldirector::hide(scslosifoundation::stringtoidentifier("vl13"), 0);
            gcmodeldirector::hide(scslosifoundation::stringtoidentifier("vl14"), 0);
            gcmodeldirector::hide(scslosifoundation::stringtoidentifier("vl15"), 0);
            globalclass.bgmusic.changefilename("Root/Data/sounds/MusicLewaTheme");
            globalclass.bgmusic.play();
        }
        this.coindoor = new lego_moveableobject("door", "vllg");
        this.coindoor.initfull();
        if (this.showcoindoor) {
            this.coindoor.show();
            this.coindoor.setalpha(0.7);
        }
        else {
            this.coindoor.hide();
        }
        var2 = gcareadirector::getscriptfluffstringuint(scslosifoundation::stringtoidentifier("door"), 1, 0, 10);
        this.coindoortext = new gs_legotext("Root/Data/Art/Fonts/BionicleFontHi", var2, screenx * 0.5, screeny * 0.83, 0, 1.5, 256, 4, 0);
        this.coindoortext.initfull();
        this.coindoortext.add();
        this.coindoortexttimer = 0.0;
        this.upgradefruit_shown = gcsaver::finditem(scslosifoundation::stringtoidentifier("frut"));
        if (this.upgradefruit_shown == 0) {
            this.upgradefruit = new vitality_pickup("frut", 17, 2, "frut", 1, 1);
            this.upgradefruit.initfull();
        }
        this.upgradefruit2_shown = gcsaver::finditem(scslosifoundation::stringtoidentifier("fru0"));
        if (this.upgradefruit2_shown == 0) {
            this.upgradefruit2 = new vitality_pickup("fru0", 17, 2, "frut", 1, 1);
            this.upgradefruit2.initfull();
        }
        this.upgradefruit3_shown = gcsaver::finditem(scslosifoundation::stringtoidentifier("fru1"));
        if (this.upgradefruit3_shown == 0) {
            this.upgradefruit3 = new vitality_pickup("fru1", 17, 2, "frut", 1, 1);
            this.upgradefruit3.initfull();
        }
        if (bettersaver::getbooleanvalue(44) == 1) {
            var3 = gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl01"), 0);
            gccharacter::settohunga(var3, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0), scslosifoundation::stringtoidentifier("mk8a"));
            gccharacter::setinputstate(var3, scslosifoundation::stringtoidentifier("none"));
            gccharacter::switchanimation(var3, scslosifoundation::stringtoidentifier("d000"), -1);
            gccharacter::setcolors(gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl01"), 0), rgba(2, 127, 30, 255), rgba(2, 127, 30, 255), rgba(0, 150, 121, 255));
        }
        if (bettersaver::getbooleanvalue(45) == 1) {
            var3 = gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl03"), 0);
            gccharacter::settohunga(var3, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0), scslosifoundation::stringtoidentifier("mk0a"));
            gccharacter::setinputstate(var3, scslosifoundation::stringtoidentifier("none"));
            gccharacter::switchanimation(var3, scslosifoundation::stringtoidentifier("d000"), -1);
            gccharacter::setcolors(gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl03"), 0), rgba(187, 231, 133, 255), rgba(187, 231, 133, 255), rgba(2, 127, 30, 255));
        }
        if (bettersaver::getbooleanvalue(46) == 1) {
            var3 = gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl08"), 0);
            gccharacter::settohunga(var3, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0), scslosifoundation::stringtoidentifier("mk6a"));
            gccharacter::setinputstate(var3, scslosifoundation::stringtoidentifier("none"));
            gccharacter::switchanimation(var3, scslosifoundation::stringtoidentifier("d003"), -1);
            gccharacter::setcolors(gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl08"), 0), rgba(2, 127, 30, 255), rgba(2, 127, 30, 255), rgba(2, 127, 30, 255));
        }
        if (bettersaver::getbooleanvalue(56) == 1) {
            this.coindoor.hide();
        }
        if (bettersaver::getbooleanvalue(62) == 1) {
            gccollisionphysicsgroup::togglepickuponoff(scslosifoundation::stringtoidentifier("ar00"), 0);
            gcnolightdirector::hide(scslosifoundation::stringtoidentifier("ar00"), gcareadirector::getcurrentarea());
        }
        this.wirlpool = new lego_moveableobject("vtcr");
        this.wirlpool.initfull();
        this.wirlpool.settweakable();
        this.orientation = 1;
        return null;
    }
    
    method cleanupfull() {
        this.coindoortexttimer = null;
        if (!(this.coindoortext == null)) {
            this.coindoortext.remove();
            this.coindoortext.cleanupfull();
            this.coindoortext = null;
        }
        if (!(this.coindoor == null)) {
            this.coindoor.cleanupfull();
            this.coindoor = null;
        }
        if (!(this.discpickup == null)) {
            this.discpickup.cleanupfull();
            this.discpickup = null;
        }
        if (!(this.upgradefruit == null)) {
            this.upgradefruit.cleanupfull();
            this.upgradefruit = null;
        }
        if (!(this.upgradefruit2 == null)) {
            this.upgradefruit2.cleanupfull();
            this.upgradefruit2 = null;
        }
        if (!(this.upgradefruit3 == null)) {
            this.upgradefruit3.cleanupfull();
            this.upgradefruit3 = null;
        }
        this.deadhives = null;
        this.cinema = null;
        this.wirlpool.cleanupfull();
        this.wirlpool = null;
        return null;
    }
    
    method exit() {
        this.parent = null;
        return null;
    }
    
    method process(param1) {
        this.rotatecrystal();
        if (this.coindoortexttimer > 0) {
            this.coindoortexttimer = this.coindoortexttimer - param1.deltatime;
        }
        else if (this.coindoortext.onscreen == 1) {
            this.coindoortext.hide();
        }
        return null;
    }
    
    method onevent(param1) {
        
    }
    
    method input(param1) {
        if (param1.event == 2) {
            if (param1.button == 251) {
                if (!(this.cinema == null)) {
                    gccinemaengine::stop(this.cinema);
                }
            }
            param1.button;
        }
        return null;
    }
    
    method give_fruit() {
        if (this.upgradefruit_shown == 0) {
            this.upgradefruit.obj.setpos(-52.53407, -28.62533, -103.1049);
            this.upgradefruit_shown = 1;
        }
        return null;
    }
    
    method give_fruit2() {
        if (this.upgradefruit2_shown == 0) {
            this.upgradefruit2.obj.setpos(45.94164, -28.62541, 3.30511);
            this.upgradefruit2_shown = 1;
        }
        return null;
    }
    
    method give_fruit3() {
        if (this.upgradefruit3_shown == 0) {
            this.upgradefruit3.obj.setpos(87.12261, 10.07925, -34.89301);
            this.upgradefruit3_shown = 1;
        }
        return null;
    }
    
    method rotatecrystal() {
        if (this.orientation > 359) {
            this.orientation = 0;
        }
        else {
            this.orientation = this.orientation + 1;
        }
        this.wirlpool.setorientation(0.0, this.orientation, 0.0);
        return null;
    }
}