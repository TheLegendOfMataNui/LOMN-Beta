class theaterscreen {
    property parent;
    property curoption;
    property mousex;
    property mousey;
    property optarray;
    property backoption;
    property active;
    property extratext;
    property minidx;
    property maxidx;
    property showidx;
    property x;
    property y;
    property curidx;
    property activemenu;
    property backmenu;
    property menuactive;
    property curscreen;
    property legend;
    property intro;
    property kini;
    property kuta;
    property ending;
    property credits;
    property behind;
    property trailer;
    property animations;
    
    method theaterscreen(param1) {
        this.parent = param1;
        this.active = 0;
        return null;
    }
    
    method initfull() {
        var var1;
        var1 = 0;
        this.minidx = 0;
        this.showidx = 10;
        this.curidx = 0;
        this.activemenu = [  ];
        this.backmenu = [  ];
        this.menuactive = 0;
        this.curoption = -1;
        this.optarray = [  ];
        this.intro = new menuoption(gcareadirector::getscriptfluffstring(scslosifoundation::stringtoidentifier("fend"), 1, 80), "", this.optarray.__length);
        this.intro.initfull();
        this.optarray.__append(this.intro);
        this.legend = new menuoption(gcareadirector::getscriptfluffstring(scslosifoundation::stringtoidentifier("fend"), 1, 81), "", this.optarray.__length);
        this.legend.initfull();
        this.optarray.__append(this.legend);
        this.kini = new menuoption(gcareadirector::getscriptfluffstring(scslosifoundation::stringtoidentifier("fend"), 1, 82), "", this.optarray.__length);
        this.kini.initfull();
        this.optarray.__append(this.kini);
        this.kuta = new menuoption(gcareadirector::getscriptfluffstring(scslosifoundation::stringtoidentifier("fend"), 1, 83), "", this.optarray.__length);
        this.kuta.initfull();
        this.optarray.__append(this.kuta);
        this.ending = new menuoption(gcareadirector::getscriptfluffstring(scslosifoundation::stringtoidentifier("fend"), 1, 84), "", this.optarray.__length);
        this.ending.initfull();
        this.optarray.__append(this.ending);
        this.credits = new menuoption(gcareadirector::getscriptfluffstring(scslosifoundation::stringtoidentifier("fend"), 1, 7), "", this.optarray.__length);
        this.credits.initfull();
        this.optarray.__append(this.credits);
        this.behind = new menuoption(gcareadirector::getscriptfluffstring(scslosifoundation::stringtoidentifier("fend"), 1, 85), "", this.optarray.__length);
        this.behind.initfull();
        this.optarray.__append(this.behind);
        this.trailer = new menuoption(gcareadirector::getscriptfluffstring(scslosifoundation::stringtoidentifier("fend"), 1, 86), "", this.optarray.__length);
        this.trailer.initfull();
        this.optarray.__append(this.trailer);
        this.animations = new menuoption(gcareadirector::getscriptfluffstring(scslosifoundation::stringtoidentifier("fend"), 1, 91), "", this.optarray.__length);
        this.animations.initfull();
        this.optarray.__append(this.animations);
        this.backoption = new menuoption(gcareadirector::getscriptfluffstring(scslosifoundation::stringtoidentifier("fend"), 1, 3), "", this.optarray.__length);
        this.backoption.initfull();
        this.optarray.__append(this.backoption);
        this.active = 1;
        return null;
    }
    
    method cleanupfull() {
        if (this.optarray != null) {
            this.cleanupshort();
        }
        this.parent = null;
        return null;
    }
    
    method cleanupshort() {
        var var1;
        var var2;
        if (this.optarray != null) {
            var1 = this.optarray.__length - 1;
            var2 = 0;
            while (var1 >= var2) {
                this.optarray[var1 - var2].cleanupfull();
                this.optarray[var1 - var2] = null;
                var2 = var2 + 1;
            }
            this.optarray = null;
        }
        this.backoption = null;
        return null;
    }
    
    method input(param1) {
        if (this.active) {
            if (this.curoption == 3) {
				debug::print("[][][] back");
                this.back();
            }
        }
        return null;
    }
    
    method onevent(param1) {
        if (this.active) {
            if (param1.eventid == 25) {
                debug::print("[][][] mouse button released : " + __tostring(param1.args[0]));
                this.mousebuttonreleased(param1.args[0]);
            }
            else if (param1.eventid == 26) {
                this.mousex = param1.args[0];
                this.mousey = param1.args[1];
                this.checkmousepos();
            }
        }
        return null;
    }

    method process(param1) {
        if (this.curscreen == 7) {
            this.theater.process(param1);
            debug::print("[][][] theater process");
        }
        else if (this.curscreen == 5) {
            this.print.process(param1);
            debug::print("[][][] print process");
        }
        return null;
    }
    
    method checkmousepos() {
        var var1;
        var var2;
        var1 = -1;
        var2 = 0;
        while ((this.optarray.__length - 1) >= var2) {
            if (this.optarray[var2].check(this.mousex, this.mousey) == 1) {
                var1 = var2;
            }
            var2 = var2 + 1;
        }
        if (var1 != -1) {
            this.curoption = var1;
        }
        return null;
    }
    
    method mousebuttonreleased(param1) {
        if (this.curoption == -1) {
            
        }
        else if (this.curoption == 9) {
			debug::print("[][][] back");
			this.back();
        }
        else if (this.curoption == 0) {
            gcstaticsoundsptrarray::playtablesound(1072);
            globalclass.bgmusic.stop();
            gchuddirector::playcinematic("Root/Data/cinematics/BIONICLEFMV3.bik", 1);
            globalclass.bgmusic.play(1);
        }
        else if (this.curoption == 1) {
            gcstaticsoundsptrarray::playtablesound(1072);
            globalclass.bgmusic.stop();
            gchuddirector::playcinematic("Root/Data/cinematics/LegendFMVEn.bik", 1);
            globalclass.bgmusic.play(1);
        }
        else if (this.curoption == 2) {
            gcstaticsoundsptrarray::playtablesound(1072);
            globalclass.bgmusic.stop();
            gchuddirector::playcinematic("Root/Data/cinematics/ToaKiniMeeting.bik", 1);
            globalclass.bgmusic.play(1);
        }
        else if (this.curoption == 3) {
            gcstaticsoundsptrarray::playtablesound(1072);
            globalclass.bgmusic.stop();
            gchuddirector::playcinematic("Root/Data/cinematics/ToaKaitaFight.bik", 1);
            globalclass.bgmusic.play(1);
        }
        else if (this.curoption == 4) {
            gcstaticsoundsptrarray::playtablesound(1072);
            globalclass.bgmusic.stop();
            gchuddirector::playcinematic("Root/Data/cinematics/ewokCelebration.bik", 1);
            globalclass.bgmusic.play(1);
        }
        else if (this.curoption == 5) {
            gcstaticsoundsptrarray::playtablesound(1072);
            globalclass.bgmusic.stop();
            gchuddirector::playcinematic("Root/Data/cinematics/CreditsFMV1.bik", 1);
            globalclass.bgmusic.play(1);
        }
        else if (this.curoption == 6) {
            gcstaticsoundsptrarray::playtablesound(1072);
            globalclass.bgmusic.stop();
            gchuddirector::playcinematic("Root/Data/cinematics/behindthescenes.bik", 1);
            globalclass.bgmusic.play(1);
        }
        else if (this.curoption == 7) {
            gcstaticsoundsptrarray::playtablesound(1072);
            globalclass.bgmusic.stop();
            gchuddirector::playcinematic("Root/Data/cinematics/BIONICLETRAILER.bik", 1);
            globalclass.bgmusic.play(1);
        }
        else if (this.curoption == 8) {
            gcstaticsoundsptrarray::playtablesound(1072);
            globalclass.bgmusic.stop();
            gchuddirector::playcinematic("Root/Data/cinematics/AnimationTests.bik", 1);
            globalclass.bgmusic.play(1);
        }
        else {
            gcstaticsoundsptrarray::playtablesound(1072);
        }
        this.curoption;
        return null;
    }

    method gotodifferentscreen(param1, param2) {
        var var1;
        var var2;
        this.curscreen = param2;
        if (param1 != null) {
            this.maxidx = param1.__length - 1;
            var1 = 0;
            while (this.maxidx >= var1) {
                var2 = new gs_legotext("Root/Data/Art/Fonts/BionicleFont", param1[var1][0], param1[var1][1], param1[var1][2], 0, 2.0, 0, 4, 0, 1);
                var2.initfull();
                var2.add();
                if (var1 <= this.showidx) {
                    var2.show();
                }
                this.backmenu.__append(var2);
                var2 = new gs_legoactivetext("Root/Data/Art/Fonts/BionicleFont", "Root/Data/Art/Fonts/BionicleFontHi", param1[var1][0], param1[var1][1], param1[var1][2], 0, 2.0, 0, 4, 0, 0);
                var2.initfull();
                var2.add();
                if (var1 <= this.showidx) {
                    var2.show();
                }
                this.activemenu.__append(var2);
                var1 = var1 + 1;
            }
            this.activemenu[0].setactive();
            this.menuactive = 1;
        }
        else {
            this.menuactive = 0;
        }
        this.curidx = 0;
        return null;
    }
    
    method back() {
        this.cleanupshort();
        this.parent.initfull();
        this.parent.active = 1;
        gcstaticsoundsptrarray::playtablesound(1073);
        return null;
    }
}