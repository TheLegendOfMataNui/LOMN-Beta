class kuta7_puzzle {
    property parent;
    
    method kuta7_puzzle(param1) {
        this.parent = param1;
        return null;
    }
    
    method initfull() {
        if (globalclass.player.actorid != "wair") {
            globalclass.player.changetoa("wair");
            gccollisionphysicsgroup::settoaposition(scslosifoundation::stringtoidentifier("str0"), scslosifoundation::stringtoidentifier("lok0"));
        }
        return null;
    }
    
    method onevent(param1) {
        if (param1.eventid == 3) {
            if (param1.args[0] == scslosifoundation::stringtoidentifier("tb00")) {
                globalclass.player.kill();
                gcstaticsoundsptrarray::playtablesound(1048);
                this.parent.level.cam.setaimode(7);
                globalclass.player.actor.setinputstate("none");
            }
        }	
        else if (param1.eventid == 4) {
            if (param1.args[0] == scslosifoundation::stringtoidentifier("tp02")) {
                gcstaticsoundsptrarray::playtablesound(1094);
            }
        }
        else if (param1.eventid == 27) {
			globalclass.player.actor.gotopos(this.parent.enterstartid, this.parent.enterlookid);
			globalclass.player.unkill();
			if (globalclass.player.actorid == "akam") {
				globalclass.player.actor.switchanimation(scslosifoundation::stringtoidentifier("ak00"));
			}	
			else if (globalclass.player.actorid == "wair") {
				globalclass.player.actor.switchanimation(scslosifoundation::stringtoidentifier("wa00"));
			}	
			else if (globalclass.player.actorid == "onua") {
				globalclass.player.actor.switchanimation(scslosifoundation::stringtoidentifier("o000"));
			}	
			globalclass.player.actor.setinputstate("ninp");
			this.parent.level.cam.setaimode(11);
			gccollisionphysicsgroup::toggletriggerboxentered(scslosifoundation::stringtoidentifier("tb00"), 0);			
        }	
        else if (param1.eventid == 46) {
            gccollisionphysicsgroup::spinmask(1.2);
        }		
        return null;
    }
    
    method cleanupfull() {
        return null;
    }
    
    method exit() {
        this.parent = null;
        return null;
    }
}