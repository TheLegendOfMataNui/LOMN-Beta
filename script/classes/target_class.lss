class target_class {
    property obj;
    property timer;
    property timername;
    property parent;
    property turnedin;
    property rotating;
    property rotatetargetsound;
    
    method target_class(obj_id, timer_name, timer_length, area_id, unused_x_pos, unused_y_pos, unused_z_pos, parent) {
        this.timername = timer_name;
        this.parent = parent;
        this.obj = new lego_moveableobject(obj_id, area_id);
        this.timer = new lego_timer(this.timername, timer_length, 0);
        return null;
    }
    
    method initfull(unused1, unused2, unused3) {
        this.obj.initfull();
        this.timer.initfull();
        this.turnedin = 0;
        this.rotating = 0;
        this.rotatetargetsound = new tablecopysound(1038);
        this.rotatetargetsound.synctoobject(this.obj.id);
        return null;
    }
    
    method cleanupfull() {
        if (this.obj != null) {
            this.obj.cleanupfull();
            this.obj = null;
        }
        if (this.timer != null) {
            this.timer.cleanupfull();
            this.timer = null;
        }
        if (this.rotatetargetsound != null) {
            this.rotatetargetsound.cleanupfull();
            this.rotatetargetsound = null;
        }
        this.timername = null;
        this.parent = null;
        this.turnedin = null;
        this.rotating = null;
        return null;
    }
    
    method process(param1) {
        var var1;
        if (this.rotating) {
            var1 = this.obj.getorientationy();
            if (this.turnedin) {
                if (var1 >= 180) {
                    this.obj.setorientation(0, 180, 0);
                    this.rotating = 0;
                }
                else {
                    this.obj.setorientation(0, var1 + 11, 0);
                }
            }
            else if (var1 >= 360) {
                this.obj.setorientation(0, 0, 0);
                this.rotating = 0;
            }
            else {
                this.obj.setorientation(0, var1 + 11, 0);
            }
        }
        return null;
    }
    
    method input(param1) {
        if (param1.event == 2) {
            if (param1.button == 79) {
                this.hit();
            }
            if (param1.button == 80) {
                
            }
        }
        return null;
    }
    
    method onevent(param1) {
        if (param1.eventid == 1) {
            
        }
        else if (param1.eventid == 8) {
            if (param1.args[0] == this.timer.id) {
                this.targerreset();
            }
        }
        else if (param1.eventid == 19) {
            if (param1.args[0] == this.obj.id) {
                this.hit();
            }
        }
        return null;
    }
    
    method hit() {
        if (this.turnedin) {
            debug::print("*********************************************************");
            debug::print("*********************PLAY THE SOUND TURN OUT SOUND******");
            debug::print("********************************************************");
            this.rotatetargetsound.play(0);
            debug::print("* turning Out");
            this.rotating = 1;
            this.turnedin = 0;
            this.timer.reset();
            this.timer.start();
            this.parent.targertback();
        }
        else {
            debug::print("********************************************************");
            debug::print("*********************PLAY THE SOUND TURN IN SOUND******");
            debug::print("********************************************************");
            this.rotatetargetsound.play(0);
            debug::print("* turning IN");
            this.turnedin = 1;
            this.rotating = 1;
            this.timer.reset();
            this.timer.start();
            this.parent.hitatarget();
        }
        return null;
    }
    
    method targerreset() {
        if (this.turnedin) {
            this.turnedin = 0;
            debug::print("***** reset turnedIN = false");
            this.rotating = 1;
            this.timer.reset();
            this.parent.targertback();
        }
        return null;
    }
    
    method settweakable() {
        this.obj.settweakable();
        return null;
    }
}