class unlock_director {
    property filename;
    property file;
    property unlocks;

    method unlock_director() {
        this.filename = "Root/data/unlocks";
        this.file = new slosi_objectfileio(this.filename);
        if (this.file.fileexist()) {
            debug::print("Loading unlocks from file...");
            this.unlocks = this.file.loadosiobject();

            // Debug: Print the version that was loaded
            if (__isint(this.unlocks.version)) {
                debug::print("[Unlocks]: Loaded unlocks version " + __tostring(this.unlocks.version));
            }
            else {
                debug::print("[Unlocks]: Loaded legacy unlocks (v1)");
            }
        }
        else {
            debug::print("No unlocks file, loading defaults...");
            this.unlocks = new unlocks();
        }

        // Make sure the unlocks are up to date
        this.unlocks.upgrade();

        debug::print("Played Onua: " + __tostring(this.unlocks.played_onua));
        debug::print("Played Gali: " + __tostring(this.unlocks.played_gali));
        debug::print("Played Pohatu: " + __tostring(this.unlocks.played_pohatu));
        debug::print("Played Kopaka: " + __tostring(this.unlocks.played_kopaka));
        debug::print("Played Lewa: " + __tostring(this.unlocks.played_lewa));
        debug::print("Played Tahu: " + __tostring(this.unlocks.played_tahu));
        debug::print("Played Akamai: " + __tostring(this.unlocks.played_akamai));
        debug::print("Played Wairuha: " + __tostring(this.unlocks.played_wairuha));
        debug::print("Played Nobua: " + __tostring(this.unlocks.played_nobua));
    }

    method save() {
        this.file.saveosiobject(this.unlocks);
    }
}