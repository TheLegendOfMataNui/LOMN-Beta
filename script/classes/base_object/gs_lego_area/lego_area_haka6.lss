class lego_area_haka6 : gs_lego_area {
    property cinema;
    property safecount;
    property kapura;
    property keahi;
    property vohon;
    property nuri;
    property agni;
    property tiribomba;
    property aodhan;
    property aft;
    property maglya;
    property jala;
    property keeper;
    property nganiki;
    property klatuu;
    property poiri;
    property penpuku;
    property giegue;
    property saumana;
    property joel;
    
    method lego_area_haka6(param1) {
        this.gs_lego_area("mosh", param1, 0, 0);
        this.lego_area_initfull();
        return null;
    }
    
    method initfull() {
        this.lego_area_show();
        globalclass.player.processequipment(2);
        globalclass.bgmusic.changefilename("Root/Data/sounds/MusicVillage");
        globalclass.bgmusic.play(1);
        if (gcsaver::findcinema(scslosifoundation::stringtoidentifier("cin2")) == 0) {
            if (((gcsaver::isconditionset(1) && gcsaver::isconditionset(2)) && gcsaver::isconditionset(4)) && gcsaver::isconditionset(8)) {
                globalclass.player.actor.deactivatedragger();
                if (globalclass.player.actor.isdraggeractive() == 0) {
                    this.cinema = gccinemaengine::create();
                    gccinemaengine::load(this.cinema, "cin2");
                    gccinemaengine::setnextarea(this.cinema, scslosifoundation::stringtoidentifier("tura"));
                    gccinemaengine::play(this.cinema);
                }
            }
        }
        this.safecount = 0;
        return null;
    }
    
    method cleanupfull() {
        this.lego_area_hide();
        this.cinema = null;
        this.safecount = null;
        this.kapura = null;
        this.keahi = null;
        this.vohon = null;
        this.nuri = null;
        this.agni = null;
        this.tiribomba = null;
        this.aodhan = null;
        this.aft = null;
        this.maglya = null;
        this.jala = null;
        this.keeper = null;
        this.nganiki = null;
        this.klatuu = null;
        this.poiri = null;
        this.penpuku = null;
        this.giegue = null;
        this.saumana = null;
        this.joel = null;
        return null;
    }
    
    method process(param1) {
        return null;
    }

    method onevent(param1) {
        if (param1.eventid == 44) {
            if ((this.cinema != null) && (this.safecount < 3)) {
                this.safecount = this.safecount + 1;
                if (this.safecount == 2) {
                    this.keahi = gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vlgr"), 0);
                    this.kapura = gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl01"), 0);
                    this.vohon = gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl02"), 0);                   
                    this.nuri = gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl03"), 0);
                    this.agni = gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl04"), 0);
                    this.tiribomba = gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl05"), 0);
                    this.aodhan = gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl06"), 0);
                    this.aft = gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl07"), 0);
                    this.maglya = gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl08"), 0);
                    this.jala = gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl09"), 0);
                    this.keeper = gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl10"), 0);
                    this.nganiki = gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl11"), 0);
                    this.klatuu = gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl12"), 0);
                    this.poiri = gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl13"), 0);
                    this.penpuku = gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl14"), 0);
                    this.giegue = gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl15"), 0);
                    this.joel = gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl16"), 0);

                    //Set Tohunga: Keahi (VLGR)
                    gccharacter::settohunga(this.keahi, rgba(247, 219, 41, 255), rgba(247, 219, 41, 255), scslosifoundation::stringtoidentifier("mk9a"));

                    //Set Kapura (VL01)
                    gccharacter::setkapura(this.kapura);
 
                    //Set Tohunga: Vohon (VL02)
                    gccharacter::settohunga(this.vohon, rgba(247, 219, 41, 255), rgba(247, 219, 41, 255), scslosifoundation::stringtoidentifier("mk2a"));             
            
                    //Set Tohunga: Nuri (VL03)
                    gccharacter::settohunga(this.nuri, rgba(41, 41, 41, 255), rgba(41, 41, 41, 255), scslosifoundation::stringtoidentifier("mk1a"));
            
                    //Set Tohunga: Agni (VL04)
                    gccharacter::settohunga(this.agni, rgba(173, 0, 0, 255), rgba(173, 0, 0, 255), scslosifoundation::stringtoidentifier("mk4a"));
                    if (bettersaver::getbooleanvalue(48) == 1) {
                        //Add item              
                        gccharacter::addpart(this.agni, "vl04/sash", 1);
                    }
            
                    //Set Tohunga: Tiribomba (VL05)
                    gccharacter::settohunga(this.tiribomba, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0), scslosifoundation::stringtoidentifier("mk8a"));
                    gccharacter::setcolors(gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl05"), 0), rgba(247, 219, 41, 255), rgba(173, 0, 0, 255), rgba(41, 41, 41, 255));
            
                    //Set Tohunga: Aodhan (VL06)
                    gccharacter::settohunga(this.aodhan, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0), scslosifoundation::stringtoidentifier("mkca"));
                    gccharacter::setcolors(gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl06"), 0), rgba(173, 0, 0, 255), rgba(247, 219, 41, 255), rgba(41, 41, 41, 255));
            
                    //Set Tohunga: Aft (VL07)
                    gccharacter::settohunga(this.aft, rgba(41, 41, 41, 255), rgba(247, 105, 33, 255), scslosifoundation::stringtoidentifier("mk3a"));
            
                    //Set Tohunga: Maglya (VL08)
                    gccharacter::settohunga(this.maglya, rgba(173, 0, 0, 255), rgba(173, 0, 0, 255), scslosifoundation::stringtoidentifier("mk2a"));
            
                    //Set Tohunga: Jala (VL09)
                    gccharacter::settohunga(this.jala, rgba(247, 219, 41, 255), rgba(247, 219, 41, 255), scslosifoundation::stringtoidentifier("mk6a"));
            
                    //Set Tohunga: Treekeeper (VL10)
                    gccharacter::settohunga(this.keeper, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0), scslosifoundation::stringtoidentifier("mk4a"));
                    gccharacter::setcolors(gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl10"), 0), rgba(0, 208, 33, 255), rgba(0, 208, 33, 255), rgba(102, 0, 102, 255));
            
                    //Set Tohunga: Nganiki (VL11)
                    gccharacter::settohunga(this.nganiki, rgba(247, 219, 41, 255), rgba(247, 219, 41, 255), scslosifoundation::stringtoidentifier("mkaa"));
            
                    //Set Tohunga: Klatuu (Vl12)
                    gccharacter::settohunga(this.klatuu, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0), scslosifoundation::stringtoidentifier("mk7a"));
                    gccharacter::setcolors(gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl12"), 0), rgba(173, 0, 0, 255), rgba(173, 0, 0, 255), rgba(247, 219, 41, 255));
            
                    //Set Tohunga: Poiri (VL13)
                    gccharacter::settohunga(this.poiri, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0), scslosifoundation::stringtoidentifier("mk0a"));
                    gccharacter::setcolors(gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl13"), 0), rgba(41, 41, 41, 255), rgba(173, 0, 0, 255), rgba(247, 105, 33, 255));
            
                    //Set Tohunga: Penpuku (VL14)
                    gccharacter::settohunga(this.penpuku, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0), scslosifoundation::stringtoidentifier("mk1a"));
                    gccharacter::setcolors(gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl14"), 0), rgba(173, 0, 0, 255), rgba(247, 219, 41, 255), rgba(41, 41, 41, 255));
            
                    //Set Tohunga: Giegue (VL15)
                    gccharacter::settohunga(this.giegue, rgba(173, 0, 0, 255), rgba(41, 41, 41, 0), scslosifoundation::stringtoidentifier("mk6a"));           
            
                    //Set Tohunga: Joel (VL16)
                    gccharacter::settohunga(this.joel, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0), scslosifoundation::stringtoidentifier("mkba"));
                    gccharacter::setcolors(gcmodeldirector::getcharacter(scslosifoundation::stringtoidentifier("vl16"), 0), rgba(247, 219, 41, 255), rgba(247, 219, 41, 255), rgba(247, 219, 41, 255));
                }
            }
        }
        else if (param1.eventid == 30) {
            this.level.cam.setaimode(9);
            globalclass.bgmusic.stop();
            globalclass.hud.hide();
        }
        else if (param1.eventid == 27) {
            globalclass.player.unkill();
            globalclass.player.actor.gotopos(scslosifoundation::stringtoidentifier("str0"), scslosifoundation::stringtoidentifier("lok0"));
            globalclass.player.actor.setinputstate("ninp");
            globalclass.level.cam.setaimode(11);
        }
        return null;
    }
    
    method input(param1) {
        if (param1.event == 2) {
            if (param1.button == 251) {
                if (this.cinema != null) {
                    gccinemaengine::stop(this.cinema);
                }
            }
        }
        return null;
    }
    method exit() {
        this.lego_area_cleanupfull();
        return null;
    }
}