class testlevelscreen : base_screen {
    property menustrings;
    property activeidx;
    property inputidx;
    property go_back;
    
    method testlevelscreen() {
        this.menustrings = null;
        this.activeidx = null;
        this.inputidx = null;
        this.go_back = 0;
        return null;
    }
    
    method initfull() {
        var var1;
        this.menustrings = [ new gs_legotext("Root/Data/Art/Fonts/tech_font_01", "TST1 - GENERAL SHENANIGANS", screenx * 0.05, screeny * 0.25, 0, 1.0, 0, 4, 0, 1), 
            new gs_legotext("Root/Data/Art/Fonts/tech_font_01", "TST5 - NUI RAMA SECTION", screenx * 0.05, (screeny * 0.25) + 40, 0, 1.0, 0, 4, 0, 1), 
            new gs_legotext("Root/Data/Art/Fonts/tech_font_01", "TST6 - TAHU TEST AREA", screenx * 0.05, (screeny * 0.25) + 80, 0, 1.0, 0, 4, 0, 1), 
            new gs_legotext("Root/Data/Art/Fonts/tech_font_01", "BACK", screenx * 0.05, (screeny * 0.25) + 160, 0, 1.0, 0, 4, 0, 1) ];
        var1 = 0;
        while ((this.menustrings.__length - 1) >= var1) {
            this.menustrings[var1].initfull();
            sctilefont::setcolor(this.menustrings[var1].font, 255, 255, 255, 255);
            this.menustrings[var1].add();
            this.menustrings[var1].show();
            var1 = var1 + 1;
        }
        this.activeidx = 0;
        sctilefont::setcolor(this.menustrings[this.activeidx].font, 255, 255, 0, 255);
        return null;
    }
    
    method cleanupfull() {
        var var1;
        if (this.menustrings != null) {
            var1 = 0;
            while ((this.menustrings.__length - 1) >= var1) {
                this.menustrings[var1].hide();
                this.menustrings[var1].cleanupfull();
                this.menustrings[var1] = null;
                var1 = var1 + 1;
            }
            this.menustrings = null;
        }
        this.activeidx = null;
        this.inputidx = null;
        this.go_back = null;
        return null;
    }
    
    method process(param1) {
        if (this.go_back) {
            screenlist.backward();
            this.go_back = 0;
        }
        return null;
    }
    
    method input(param1) {
        if (param1.event == 2) {
            if (param1.button == 38) {
                gcstaticsoundsptrarray::playtablesound(1072);
                sctilefont::setcolor(this.menustrings[this.activeidx].font, 255, 255, 255, 255);
                this.activeidx = this.activeidx - 1;
                if (this.activeidx < 0) {
                    this.activeidx = this.menustrings.__length - 1;
                }
                sctilefont::setcolor(this.menustrings[this.activeidx].font, 255, 255, 0, 255);
            }
            else if (param1.button == 40) {
                gcstaticsoundsptrarray::playtablesound(1072);
                sctilefont::setcolor(this.menustrings[this.activeidx].font, 255, 255, 255, 255);
                this.activeidx = this.activeidx + 1;
                if (this.activeidx > (this.menustrings.__length - 1)) {
                    this.activeidx = 0;
                }
                sctilefont::setcolor(this.menustrings[this.activeidx].font, 255, 255, 0, 255);
            }
            else if (param1.button == 13) {
                gcstaticsoundsptrarray::playtablesound(1073);
                //Load TST1 (Onua)
                if (this.activeidx == 0) {
                    if (globalclass.shortinit) {
                        globalclass.initshort();
                    }
                    this.cleanupfull();
                    screenlist.forward(8);
                    screenlist.screens[9].screen.toa = "onua";	
                    screenlist.screens[9].screen.startingarea = "tst1";	
                }
                //Load TST5 (Lewa)
                else if (this.activeidx == 1) {
                    if (globalclass.shortinit) {
                        globalclass.initshort();
                    }
                    this.cleanupfull();
                    screenlist.forward(8);
                    screenlist.screens[9].screen.toa = "lewa";	
                    screenlist.screens[9].screen.startingarea = "tst5";	
                }
                //Load TST6 (Tahu)
                else if (this.activeidx == 2) {
                    if (globalclass.shortinit) {
                        globalclass.initshort();
                    }
                    this.cleanupfull();
                    screenlist.forward(8);
                    screenlist.screens[9].screen.toa = "onua";	
                    screenlist.screens[9].screen.startingarea = "tst6";	
                }
                //Go back to the root test menu
                else if (this.activeidx == 3) {
                    this.go_back = 1;
                }
            }
        }
        return null;
    }
}