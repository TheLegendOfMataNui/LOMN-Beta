class gly22_puzzle {
    property parent;
    property gyzerarray;
    property lastgyzer;
    property door;
	property printglyph;
    
    method gly22_puzzle(param1) {
        this.parent = param1;
        return null;
    }
    
    method initfull() {
        var var1;
        globalclass.player.actor.setunderwater(1);
        this.door = new lego_moveableobject("gld2");
        this.door.initfull();
        this.door.hide();
        this.gyzerarray = [ new gizzer("sw00", "giz1", "tim0", this), 
            new gizzer("sw01", "giz3", "tim1", this), 
            new gizzer("sw02", "giz2", "tim2", this), 
            new gizzer("sw03", "giz4", "tim3", this), 
            new gizzer("sw04", "giz5", "tim4", this), 
            new gizzer("sw05", "giz6", "tim5", this), 
            new gizzer("sw06", "giz7", "tim6", this) ];
        var1 = 0;
        while ((this.gyzerarray.__length - 1) >= var1) {
            this.gyzerarray[var1].initfull();
            this.gyzerarray[var1].show();
            var1 = var1 + 1;
        }
        this.lastgyzer = new lego_moveableobject("giz8");
        this.lastgyzer.initfull();
        this.lastgyzer.setpos(this.lastgyzer.getx(), 10, this.lastgyzer.getz());
        this.lastgyzer.setresponse(1, 0, 1);
        this.lastgyzer.setslidetimer(0, 16, 0, 2, -1, 1);
        if (gcsaver::finditem(scslosifoundation::stringtoidentifier("pgl2")) == 0) {
            this.printglyph = new lego_pickup("pgl2", 0, 7, "item", 5, 0);
            this.printglyph.initfull();
        }
        return null;
    }
    
    method input(param1) {
        if (param1.button == 89) {
            if (param1.event == 2) {
                this.cheat();
            }
        }
        return null;
    }
    
    method cheat() {
        return null;
    }
    
    method cleanupfull() {
        var var1;
        if (this.gyzerarray != null) {
            var1 = 0;
            while ((this.gyzerarray.__length - 1) >= var1) {
                this.gyzerarray[var1].cleanupfull();
                this.gyzerarray[var1] = null;
                var1 = var1 + 1;
            }
            this.gyzerarray = null;
        }
        if (this.lastgyzer != null) {
            this.lastgyzer.cleanupfull();
            this.lastgyzer = null;
        }
        if (this.door != null) {
            this.door.cleanupfull();
            this.door = null;
        }
        if (this.printglyph != null) {
            this.printglyph.cleanupfull();
            this.printglyph = null;
        }
        return null;
    }
    
    method onevent(param1) {
        var var1;
        if (this.gyzerarray != null) {
            var1 = 0;
            while ((this.gyzerarray.__length - 1) >= var1) {
                this.gyzerarray[var1].onevent(param1);
                var1 = var1 + 1;
            }
        }
        if (param1.eventid == 46) {
            gccollisionphysicsgroup::spinmask(1.2);
        }
        else if (param1.eventid == 27) {
            globalclass.player.actor.gotopos(this.parent.enterstartid, this.parent.enterlookid);
            globalclass.player.unkill();
            globalclass.player.actor.setunderwater(1);
        }
        else if (param1.eventid == 1) {
            
        }
        else if (param1.eventid == 4) {
            if (param1.args[0] == scslosifoundation::stringtoidentifier("tp01")) {
                screenlist.screens[2].screen.areas[12].puzzle.needstobeunderwater(1);
                screenlist.screens[2].screen.areas[12].puzzle.switchit(1);
            }
        }
        return null;
    }
}