class akam7_piston {
    property obj;
    property time;
    property delay;
    property dist;
    property axis;
    property x;
    property y;
    property z;
    property active;
    
    method akam7_piston(obj_id, area_id, distance, axis, time, delay) {
        this.obj = new lego_moveableobject(obj_id, area_id);
        this.dist = distance;
        this.axis = axis;
        this.time = time;
        this.delay = delay;
        return null;
    }
    
    method initfull(int1, int2) {
        this.obj.initfull();
        if (int1 == 1) {
            this.obj.setcrushflags(1, 1, 1, 1, 1, 1);
        }
        this.x = gcmoveableobj::getx(this.obj.handle);
        this.y = gcmoveableobj::gety(this.obj.handle);
        this.z = gcmoveableobj::getz(this.obj.handle);
        this.active = 0;
        if (int2 == 1) {
            this.activate();
        }
        return null;
    }
    
    method activate() {
        if (this.active == 0) {
            this.active = 1;
            if (this.axis == 1) {
                gcmoveableobj::setslidetimer(this.obj.handle, this.dist, 0.0, 0.0, this.time, -1, this.delay);
            }
            if (this.axis == 2) {
                gcmoveableobj::setslidetimer(this.obj.handle, 0.0, this.dist, 0.0, this.time, -1, this.delay);
            }
            if (this.axis == 3) {
                gcmoveableobj::setslidetimer(this.obj.handle, 0.0, 0.0, this.dist, this.time, -1, this.delay);
            }
            if (this.axis == 4) {
                gcmoveableobj::setslidetimer(this.obj.handle, this.dist, 20.0, 0.0, this.time, -1, this.delay);
            }
        }
        return null;
    }
    
    method cleanupfull() {
        if (this.obj != null) {
            this.obj.cleanupfull();
            this.obj = null;
        }
        return null;
    }
    
    method reset(int) {
        gcmoveableobj::cancelinterpolate(this.obj.handle);
        gcmoveableobj::setposition(this.obj.handle, this.x, this.y, this.z);
        this.active = 0;
        if (int == 1) {
            this.activate();
        }
        return null;
    }
}